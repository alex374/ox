# AI Design Agent 使用指南

## 第一次运行项目

### 方法一：使用启动脚本（推荐）

```bash
./start.sh
```

启动脚本会自动：
- 检查并创建 `.env` 文件
- 安装必要的依赖
- 启动开发服务器

### 方法二：手动步骤

1. **复制环境变量文件**
   ```bash
   cp .env.example .env
   ```

2. **编辑环境变量**
   ```bash
   nano .env  # 或使用其他编辑器
   ```
   
   设置您的 OpenRouter API 密钥：
   ```
   VITE_OPENROUTER_API_KEY=sk-or-v1-xxxxxxxxxxxxx
   ```

3. **安装依赖（如果还没安装）**
   ```bash
   npm install
   ```

4. **启动开发服务器**
   ```bash
   npm run dev
   ```

## 获取 OpenRouter API 密钥

1. 访问 [OpenRouter](https://openrouter.ai)
2. 注册账户并登录
3. 在仪表板中生成新的 API 密钥
4. 复制密钥并粘贴到 `.env` 文件中

## 界面功能说明

### 左侧对话区域

- **消息输入框**: 在底部输入框中描述您的设计需求
- **消息展示**: 
  - 支持 Markdown 格式
  - 支持 Mermaid 图表
  - 显示设计稿卡片（如果生成）
- **设置按钮**: 点击右上角齿轮图标配置 API 密钥

### 右侧设计稿画廊

- **网格布局**: 展示所有生成的设计稿
- **点击查看**: 点击设计稿卡片查看详情
- **自动更新**: 当生成新设计稿时自动显示

## 使用示例

### 基础设计请求

```
用户输入：设计一个现代化的登录页面

AI 回复：我来为您设计一个现代化的登录页面...
[会生成设计稿卡片显示在右侧]
```

### 流程图设计

```
用户输入：创建一个用户注册流程图

AI 回复：
```mermaid
graph TD
    A[开始] --> B[填写表单]
    B --> C{验证信息}
    C -->|成功| D[注册完成]
    C -->|失败| B
```

这个流程图展示了用户注册的完整过程...
```

### 组件设计

```
用户输入：设计一个电商产品卡片组件

AI 回复：我来为您设计一个电商产品卡片组件，包含以下元素：

- 产品图片
- 产品标题
- 价格信息
- 购买按钮
- 评分显示

[会生成对应的设计稿]
```

## 技术特性

### Markdown 支持

支持完整的 Markdown 语法：
- **粗体文本**
- *斜体文本*
- `代码块`
- 列表
- 链接
- 表格

### Mermaid 图表

支持多种图表类型：
- 流程图 (flowchart)
- 序列图 (sequence)
- 类图 (class)
- 状态图 (state)
- 甘特图 (gantt)

### 设计稿生成

当您的请求包含设计相关关键词时，系统会自动生成设计稿卡片：
- 设计
- 界面
- 页面
- 布局
- 组件
- UI/UX
- 原型

## 常见问题解决

### 1. API 密钥错误

**问题**: "OpenRouter API key is required" 或 "Failed to communicate with AI service"

**解决方案**:
- 检查 `.env` 文件是否存在
- 确认 API 密钥格式正确（以 `sk-or-v1-` 开头）
- 确认 API 密钥有效且有足够余额

### 2. 页面无法显示

**问题**: 页面空白或样式错误

**解决方案**:
```bash
# 清除缓存并重新安装
rm -rf node_modules package-lock.json
npm install
npm run dev
```

### 3. Mermaid 图表不显示

**问题**: 图表语法正确但不显示

**解决方案**:
- 确保图表语法完全正确
- 检查浏览器控制台是否有错误
- 尝试刷新页面

### 4. 设计稿不生成

**问题**: 对话正常但不生成设计稿

**原因**: 系统根据关键词检测是否生成设计稿

**解决方案**: 在请求中明确包含设计相关词汇，如：
- "设计一个..."
- "创建界面..."
- "设计页面..."

## 开发模式

启动开发服务器后：
- 访问 `http://localhost:5173`
- 代码修改会自动热重载
- 按 `Ctrl+C` 停止服务器

## 生产构建

```bash
npm run build
```

构建文件将生成在 `dist/` 目录中。

## 项目定制

### 修改 AI 模型

编辑 `src/services/api.ts`：
```typescript
model: 'openai/gpt-4'  // 改为其他模型
```

### 添加更多设计稿样式

编辑 `src/services/api.ts` 中的 `generateMockDesignCard` 方法。

### 自定义界面样式

项目使用 Tailwind CSS，您可以：
- 修改 `tailwind.config.js`
- 在 `src/index.css` 添加自定义样式